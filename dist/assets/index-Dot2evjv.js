(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const o of e)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&a(r)}).observe(document,{childList:!0,subtree:!0});function n(e){const o={};return e.integrity&&(o.integrity=e.integrity),e.referrerPolicy&&(o.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?o.credentials="include":e.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(e){if(e.ep)return;e.ep=!0;const o=n(e);fetch(e.href,o)}})();const L=()=>{const c=document.querySelector("footer"),t=document.createElement("div");c.append(t),t.className="divFooter";const n=document.createElement("p");n.innerText="©️ Created by Ariadna Lopez",t.append(n),n.className="pFooter"},P=async()=>{const c=document.querySelector("main");c.innerHTML=" ",document.createElement("h2");const t=document.createElement("section");t.className="sectionAnterioresViajes",c.append(t);const a=await(await fetch("https://project10back.vercel.app/api/v1/eventosPasados")).json();A(a,t)},A=(c,t)=>{for(const n of c){const a=document.createElement("article");a.className="articleEventoPasado",t.append(a);const e=document.createElement("img");e.className="imgEventoPasado",e.src=n.imagen,a.append(e);const o=document.createElement("h3");o.className="tituloEventoPasado",o.innerText=n.titulo,a.append(o)}},S=["https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716892443/Proyecto%2010/paris.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893665/Proyecto%2010/tokio.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893966/Proyecto%2010/newyork.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894061/Proyecto%2010/sidney.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894092/Proyecto%2010/elcairo.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894159/Proyecto%2010/roma.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894193/Proyecto%2010/londres.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894234/Proyecto%2010/barcelona.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894266/Proyecto%2010/bali.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894308/Proyecto%2010/cancun.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894356/Proyecto%2010/ciudaddelcabo.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894389/Proyecto%2010/honolulu.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894468/Proyecto%2010/estambul.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894494/Proyecto%2010/atenas.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716894557/Proyecto%2010/venecia.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893116/Proyecto%2010/berlin.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893163/Proyecto%2010/riodejaneiro.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893287/Proyecto%2010/bangkok.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893371/Proyecto%2010/moscu.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893467/Proyecto%2010/sanfrancisco.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893503/Proyecto%2010/toronto.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893541/Proyecto%2010/dubai.jpg","https://res.cloudinary.com/dgyeaj8pu/image/upload/v1716893595/Proyecto%2010/buenosaires.jpg"],b=()=>{const c=document.querySelector("main");c.innerHTML="";const t=document.createElement("section");t.className="sectionImages",c.append(t);for(const n of S){const a=document.createElement("article");a.className="articleImage",t.append(a);const e=document.createElement("img");e.className="imgHome",e.src=n,a.append(e)}};let h;const j=()=>{const c=document.querySelector("main");if(c.innerHTML=" ",!localStorage.getItem("token"))k();else{c.innerHTML="";const t=document.createElement("div");t.className="divLogeado",c.append(t);const n=document.createElement("p"),a=localStorage.getItem("userName");n.innerText=` Hola ${a}
    Estás logead@ correctamente`,t.append(n);const e=document.createElement("button");e.innerText="Logout",e.className="buttonLogout",t.append(e),e.addEventListener("click",()=>{localStorage.clear(),j()})}},k=()=>{const c=document.querySelector("main");c.innerHTML=" ";const t=document.createElement("section");t.className="sectionLogin",c.append(t);const n=document.createElement("form");n.className="formLogin",t.append(n);const a=document.createElement("input");a.placeholder="Usuario",n.append(a);const e=document.createElement("input");e.type="password",e.placeholder="Contraseña",n.append(e);const o=document.createElement("div");o.className="divError",n.append(o);const r=document.createElement("p");r.className="pError",o.append(r),r.style.display="none";const i=document.createElement("button");i.className="buttonLogin",i.textContent="Login",n.append(i),n.addEventListener("submit",()=>{T(a.value,e.value)});const s=document.createElement("div");s.className="sectionRegisterLogin",t.append(s);const l=document.createElement("p");l.innerText="Todavia no estás registrad@?",s.append(l);const d=document.createElement("p");d.innerText="Regístrate!!!",d.className="pRegistroEnlace",d.addEventListener("click",H),s.append(d)},T=async(c,t)=>{const n=document.querySelector("main"),a=JSON.stringify({userName:c,password:t});console.log(c,t);const e=await fetch("https://project10back2.vercel.app/api/v1/users/login",{method:"POST",body:a,headers:{"Content-Type":"application/json"}}),o=document.querySelector(".pError");if(console.log(o),e.status===400)o.style.display=="none"&&(o.innerText="Usuario o contraseña incorrectos",o.style.display="flex");else{const r=await e.json();if(console.log(r),localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.user)),localStorage.setItem("email",JSON.stringify(r.user.email)),localStorage.setItem("userName",JSON.stringify(r.user.userName)),localStorage.getItem("token")){n.innerHTML="";const i=localStorage.getItem("userName"),s=document.createElement("div");n.append(s),s.className="divLogeado";const l=document.createElement("p");l.innerText=`Hola ${i}!!
      Estás logead@ correctamente`,s.append(l);const d=document.createElement("button");d.className="buttonLogout",d.innerText="Logout",s.append(d),d.addEventListener("click",()=>{localStorage.clear(),j()})}}},H=async()=>{const c=document.querySelector("main");c.innerHTML=" ";const t=document.createElement("form");t.className="formLogin",c.append(t);const n=document.createElement("input");n.placeholder="Nombre completo";const a=document.createElement("input");a.placeholder="Usuario";const e=document.createElement("input");e.placeholder="Contraseña";const o=document.createElement("input");o.placeholder="Email",o.type="email";const r=document.createElement("input");r.placeholder="Teléfono";const i=document.createElement("div");i.className="divError";const s=document.createElement("p");s.className="pError",s.style.display="none",i.append(s);const l=document.createElement("button");l.className="buttonLogin",l.textContent="Registrarse",e.type="password",t.append(n),t.append(a),t.append(e),t.append(o),t.append(r),t.append(i),t.append(l),t.addEventListener("submit",async()=>{console.log("submit"),h=a.value;const d=o.value;n.value,r.value;const y=await(await fetch("https://project10back2.vercel.app/api/v1/users")).json(),g=[],m=[];for(const p of y)g.push(p.userName),m.push(p.email);if(console.log(g),console.log(m),console.log(h),n.value.length===0||a.value.length===0||e.value.length===0||o.value.length===0||r.value.length===0)s.style.display=="none"?(s.innerText="Rellena todos los datos",s.style.display="flex"):s.innerText="Rellena todos los datos";else if(e.value.length<6||e.value.length>10)s.style.display=="none"?(s.innerText="La contraseña debe tener entre 6 y 10 caracteres",s.style.display="flex"):s.innerText="La contraseña debe tener entre 6 y 10 caracteres";else if(g.includes(h))console.log("el usuario ya existe"),s.style.display=="none"?(s.innerText="Este usuario ya existe",s.style.display="flex"):s.innerText="Este usuario ya existe";else if(m.includes(d))s.style.display=="none"?(s.innerText="Este email ya existe",s.style.display="flex"):s.innerText="Este email ya existe ";else{c.innerHTML=" ";const p=document.createElement("h2");p.innerText=" Cargando...",c.append(p),w(a.value,e.value,o.value,n.value,r.value)}})},w=async(c,t,n,a,e)=>{const o=JSON.stringify({userName:c,password:t,email:n}),r=await fetch("https://project10back2.vercel.app/api/v1/users/register",{method:"POST",body:o,headers:{"Content-Type":"application/json"}}),i=JSON.stringify({nombre:a,email:n,telefono:e}),s=await fetch("https://project10back2.vercel.app/api/v1/asistentes/",{method:"POST",body:i,headers:{"Content-Type":"application/json"}}),l=await r.json(),d=await s.json();console.log(d,l),T(c,t)},I=async(c,t,n)=>{const a=document.querySelector("main");a.innerHTML="";const e=document.createElement("section");e.className="sectionNuevoAsistente",a.append(e);const o=document.createElement("h2");o.innerText=t,o.className="tituloNuevoAsistente",e.append(o);const r=document.createElement("article");if(e.append(r),r.className="articleAsistentes",n.length===0){const s=document.createElement("p");s.innerText=`Todavía no hay asistentes
  Apúntate el primero!`,r.append(s),s.className="pNombre"}else for(const s of n){const l=document.createElement("p");l.innerText=`🛩️ Nombre: ${s.nombre} 
     Email: ${s.email} `,r.append(l),l.className="pNombre"}const i=document.createElement("button");i.className="buttonAsistente",i.innerText="Volver",e.append(i),i.addEventListener("click",f)},R=async(c,t,n)=>{const a=document.querySelector("main");a.innerHTML="";const e=document.createElement("section");e.className="sectionNuevoAsistente",a.append(e);const o=document.createElement("h2");o.innerText=t,o.className="tituloNuevoAsistente",e.append(o);const r=document.createElement("article");e.append(r);let i=localStorage.getItem("email"),s;const d=await(await fetch("https://project10back.vercel.app/api/v1/asistentes")).json();for(const p of d)`"${p.email}"`==i&&(s=p._id);const g=(await(await fetch(`https://project10back.vercel.app/api/v1/eventos/${c}/`)).json()).asistentes;let m=[];for(const p of g)m.push(p._id);if(console.log(s,m),m.includes(s)){const p=document.createElement("p");p.innerText="Ya estás inscrito en este evento",p.className="pError",e.append(p);const u=document.createElement("button");u.className="buttonAsistente",u.innerText="Volver",e.append(u),u.addEventListener("click",f)}else{const p={method:"PUT",headers:{"Content-Type":"aplication/json",Authorization:`Bearer ${localStorage.getItem("token")}`}};await fetch(`https://project10back.vercel.app/api/v1/eventos/${c}/${s}`,p);const u=document.createElement("p");u.className="pAceptado",u.innerText="Te has registrado correctamente",e.append(u);const E=document.createElement("button");E.className="buttonAsistente",E.innerText="Volver",e.append(E),E.addEventListener("click",f)}},f=async()=>{const c=document.querySelector("main");c.innerHTML=" ";const t=document.createElement("section");t.className="sectionProximosViajes",c.append(t);const n=document.createElement("h2");n.innerText=" Cargando...",t.append(n);const e=await(await fetch("https://project10back.vercel.app/api/v1/eventos")).json();M(e,t)},M=(c,t)=>{t.innerHTML=" ";for(const n of c){const a=document.createElement("article");a.className="articleEvento",t.append(a);const e=document.createElement("img");e.className="imgEventoProximo",e.src=n.imagen,a.append(e);const o=document.createElement("div");o.className="divTitulo",a.append(o);const r=document.createElement("h3");r.className="tituloEvento",r.innerText=n.titulo,o.append(r);const i=document.createElement("p");i.className="precio",i.innerText=`Precio: ${n.precio}€`,a.append(i);const s=document.createElement("div");s.className="divDescripcion",a.append(s);const l=document.createElement("p");if(l.className="descripcion",l.innerText=n.descripcion,s.append(l),localStorage.getItem("token")){const d=document.createElement("div");d.className="divButtonAsistente",a.append(d);const v=document.createElement("button");v.className="buttonAsistente",v.innerText="Apúntate!",d.append(v),v.addEventListener("click",()=>{const m=n._id,p=n.titulo;n.asistentes,R(m,p)});const y=document.createElement("div");a.append(y);const g=document.createElement("p");g.className="pAsistentes",g.innerText="Ver asistentes",y.append(g),g.addEventListener("click",()=>{const m=n._id,p=n.titulo,u=n.asistentes;I(m,p,u)})}}},O=[{texto:"Home",funcion:b},{texto:"Login/Registro",funcion:j},{texto:"Próximos Viajes",funcion:f},{texto:"Anteriores Viajes",funcion:P}],x=()=>{const c=document.querySelector("header");c.innerHTML="";const t=document.createElement("h1");t.textContent="Viajando por el mundo 🌍✈️";const n=document.createElement("div");n.className="divHeader";const a=document.createElement("nav");for(const e of O){const o=document.createElement("a");o.href="#",e.texto==="Login"&&localStorage.getItem("token")?(o.textContent="Logout",o.addEventListener("click",()=>{localStorage.removeItem("token"),x()})):(o.textContent=e.texto,o.addEventListener("click",e.funcion)),a.append(o)}c.append(t),c.append(n),n.append(a),b()},N=document.querySelector("#app"),q=document.createElement("header"),C=document.createElement("main"),F=document.createElement("footer");N.append(q);N.append(C);N.append(F);x();L();
